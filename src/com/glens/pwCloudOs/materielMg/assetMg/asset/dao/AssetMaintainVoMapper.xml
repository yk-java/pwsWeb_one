<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.glens.pwCloudOs.materielMg.assetMg.asset.dao.AssetMaintainVoMapper" >
  <resultMap id="BaseResultMap" type="com.glens.pwCloudOs.materielMg.assetMg.asset.vo.AssetMaintainVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="rowid" property="rowid" jdbcType="BIGINT" />
    <result column="ASSET_CODE" property="assetCode" jdbcType="VARCHAR" />
    <result column="ASSET_NAME" property="assetName" jdbcType="VARCHAR" />
    <result column="MT_DATE" property="mtDate" jdbcType="VARCHAR" />
    <result column="MT_CONTENT" property="mtContent" jdbcType="VARCHAR" />
    <result column="MT_PROCESS" property="mtProcess" jdbcType="VARCHAR" />
    <result column="MT_COST" property="mtCost" jdbcType="REAL" />
    <result column="MT_RECEIPT" property="mtReceipt" jdbcType="VARCHAR" />
    <result column="MT_VENDER" property="mtVender" jdbcType="VARCHAR" />
    <result column="NEXT_MT_DATE" property="nextMtDate" jdbcType="VARCHAR" />
    <result column="REMARKS" property="remarks" jdbcType="VARCHAR" />
  </resultMap>
  
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
   g.rowid,g.ASSET_CODE,b.ASSET_NAME,g.MT_DATE,g.MT_CONTENT,g.MT_PROCESS,g.MT_COST,g.MT_RECEIPT,g.MT_VENDER,g.NEXT_MT_DATE,g.REMARKS
  </sql>
  
  <select id="queryForCount" parameterType="java.util.HashMap" resultType="int">
  	select count(*) from GM_ASSET_MAINTAIN
  	where SYS_PROCESS_FLAG='1' and ASSET_CODE=#{assetCode}
  	<if test="fromDate != null and fromDate !=''">
  	and MT_DATE &gt;=#{fromDate}
  	</if>
  	<if test="toDate != null and toDate !=''">
  	and MT_DATE &lt;=#{toDate}
  	</if>
  </select>
  
  <select id="queryForPage" parameterType="java.util.HashMap" resultMap="BaseResultMap">
  	select 
    <include refid="Base_Column_List" />
    from GM_ASSET_MAINTAIN g
	left join gm_asset_base b  on g.ASSET_CODE=b.ASSET_CODE
    where g.SYS_PROCESS_FLAG='1' and g.ASSET_CODE=#{assetCode}
  	<if test="fromDate != null and fromDate !=''">
  	and g.MT_DATE &gt;=#{fromDate}
  	</if>
  	<if test="toDate != null and toDate !=''">
  	and g.MT_DATE &lt;=#{toDate}
  	</if>
  	limit #{firstResult},#{maxResult}
  </select>
  
  <delete id="delete" parameterType="com.glens.pwCloudOs.materielMg.assetMg.asset.vo.AssetMaintainVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
   
    
    
    delete from GM_ASSET_MAINTAIN where rowid = #{rowid,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.glens.pwCloudOs.materielMg.assetMg.asset.vo.AssetMaintainVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into GM_ASSET_MAINTAIN(ASSET_CODE,MT_DATE,MT_CONTENT,MT_PROCESS,MT_COST,MT_RECEIPT,MT_VENDER,
    NEXT_MT_DATE,SYS_CREATE_TIME,SYS_PROCESS_FLAG,REMARKS)
    VALUES(#{assetCode},#{mtDate},#{mtContent},#{mtProcess},#{mtCost},#{mtReceipt},#{mtVender},#{nextMtDate},now(),'1',#{remarks})
  </insert>
  
 
  
</mapper>