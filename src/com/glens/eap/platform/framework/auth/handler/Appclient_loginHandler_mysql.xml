<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="clientLoginHandler">

  <resultMap id="UserToken" type="com.glens.eap.platform.framework.beans.UserToken">
  		 <result property="regionCode" column="REGION_CODE" />
  		 <result property="regionName" column="REGION_NAME" />
  		 <result property="companyCode" column="COMPANY_CODE" />
  		 <result property="companyName" column="COMPANY_NAME" />
         <result property="unitCode" column="UNIT_CODE" />
         <result property="unitName" column="UNIT_NAME" />
         <result property="roleCode" column="ROLE_CODE" />
         <result property="roleName" column="ROLE_NAME" />
         <result property="employeeCode" column="EMPLOYEECODE" />
  		 <result property="employeeName" column="EMPLOYEENAME" />
         <result property="accountCode" column="ACCOUNT_CODE" />
         <result property="accountName" column="ACCOUNT_NAME" />
         <result property="accountPsw" column="ACCOUNT_PASSWORD" />
         <result property="accountType" column="ACCOUNT_TYPE" />
         <result property="x" column="X" />
         <result property="y" column="Y" />
  </resultMap>

 <select id="[getAccountByAccountName]" parameterType="java.lang.String" resultMap="UserToken">
    select a.REGION_CODE,a.EMPLOYEECODE,a.ACCOUNT_CODE,a.ACCOUNT_NAME,a.ACCOUNT_PASSWORD,a.ACCOUNT_TYPE,
	b.REGION_NAME,c.EMPLOYEENAME,d.COMPANY_CODE,d.COMPANY_NAME,e.UNIT_CODE,e.UNIT_NAME,
	f.ROLE_NAME, f.ROLE_CODE, d.X, d.Y
	from pf_account a
	join md_region b on a.REGION_CODE=b.REGION_CODE
	join md_employee c on a.EMPLOYEECODE=c.EMPLOYEECODE
	join es_company d on a.COMPANY_CODE=d.COMPANY_CODE
	join md_org_unit e on c.UNIT_CODE=e.UNIT_CODE
	join sm_role f on a.ROLECODE=f.ROLE_CODE
	where a.SYS_PROCESS_FLAG='1' and a.ACCOUNT_NAME=#{accountName}
 </select>
 
</mapper>