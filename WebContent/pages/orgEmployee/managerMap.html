<!DOCTYPE HTML>
<html>
<head>
<title>人员调动进度信息</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<script type="text/javascript" src="../../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script></head>
<script type="text/javascript" src="../../angular-1.4.6/angular.min.js"></script>
<script type="text/javascript" src="../../js/PageBar.js"></script>
<script type="text/javascript" src="../../js/DropDownList-1.2/DropDownList-v1.2.js"></script>
<link rel="stylesheet" type="text/css" href="../../js/DropDownList-1.2/DropDownList.css" />
<script type="text/javascript" src="../../js/Calendar.js"></script>
<script type="text/javascript" src="../../js/config.js"></script>
<script type="text/javascript" src="../../js/util.js"></script>
<script type="text/javascript" src="../../js/Calendar.js"></script>
<script type="text/javascript" src="../../js/eapJs/core/eap.core.js" ></script>
<script type="text/javascript" src="../../js/eapJs/plugins/eap.tip.js" ></script>
<script type="text/javascript" src="../../js/eapJs/plugins/eap.validate.js"></script>
<script type="text/javascript" src="../../js/eapJs/local/eap.lang-zh_CN.js"></script>
<link rel="stylesheet" type="text/css" href="../../css/validate.css"/>
<link rel="stylesheet" type="text/css" href="../../css/edit.css"/>

<script type="text/javascript" src="../../js/showDlog/showDlog.js"></script>
<link rel="stylesheet" type="text/css" href="../../js/showDlog/showDlog-blue.css" />

<style type="text/css">
	*{font-family: '微软雅黑';padding:0;margin:0;list-style:none}
	.member_warp{padding:20px}
	.member_warp .member_warpul li{height:70px;position:relative;border-left:1px dashed #d2d2d2;display: inline-block;width:100%;background:#F7F7F7;margin-top:5px;}
	.member_warp li{height:80px;position:relative;}
	.member_warp li span.status{display:block;width:20px;height:20px;border-radius:50%;background:#ccc;position:absolute;left:-10px;top:1px}
	.member_warp li span.success{background:#ff9205;}
	.member_warp li span.title{font-size:14px;color:#568ee3;margin-left:20px;display: inline-block;width:250px}
	.member_warp li span.title_name{margin-left:30px}
	.member_warp li span.btn{padding:5px 10px;background:#e0e8f9;color:#fff;margin-left:30px;cursor:pointer;border-radius: 5px;background: #4ca9ff;}
	.member_warp li span.btn:hover{background:#2494fb}
	.member_warp li:last-child{border-left:none;height:30px}
	.addr{font-size:12px;display: inline-block;width:250px;margin-left:20px;}
	.addr1{font-size:12px;display: inline-block;width:250px;}
	.dialog-viewcyle1{width:600px;height:300px;}
	.returnhtml{cursor: pointer;color: #3385FF;font-family: '微软雅黑';border: 1px #3385FF solid;border-radius: 10px;padding: 4px;width: 60px;text-align:center;margin-top:30px;margin-left:10px}
	.colorred{color:red}
</style>
</head>

<body ng-app="userMgr" ng-controller="userMgrCtrl">

<div class="list">
	<div class="list_content">
		
		<div class="tabs">
			<a href="#lay1" class="tab selected">人员职业地图</a>
		</div>
		<div class="member_warp" style="overflow:hidden">
			<ul class="member_warpul" style="float:left">
				<!-- <li ng-repeat="item in dataList">
					<span class="status success" ng-if="item.SYS_PROCESS_FLAG==1" ></span>
					<span class="status" ng-if="item.SYS_PROCESS_FLAG==0" ></span>
					<span class="title">{{item.NODE_NAME}}</span>
					<span class="title_name">{{item.PROCESSOR_NAME}}&nbsp;&nbsp;&nbsp;<span ng-if="item.SYS_PROCESS_FLAG==1">{{item.PROCESS_TIME}}</span></span>
					<span class="btn" ng-click="showasset(item)" ng-if="item.SYS_PROCESS_FLAG==0">{{item.NODE_NAME}}</span>
				</li> -->
				
				<li ng-repeat="item in projectList" style="padding-top:20px" >
					
					<span class="status success"></span>
					<span class="title">{{item.proName}}</span>
					<span>{{item.province}}{{item.city}}{{item.district}}</span>
					<br />
					<br />
					<span class="addr">职务：项目经理 </span>
					<span class="addr1" ng-class="{'colorred':!item.sDate}">{{dateD(item.sDate,item.eDate)}}</span>
					
					<span class="addr2">{{dayshow(item.days)}}(天)</span>
				</li>
				<li style="margin-top:0px;height:0px;">
					
					<a class=""></a>
					
				</li>
			</ul>
			
			
		</div>
		
	</div>
</div>
<script type="text/javascript">
var app = angular.module("userMgr", []);
app.controller("userMgrCtrl", function($scope, $http){
	var params = getUrlParams();
	var moveType =params.moveType;
	var employeeCode =params.employeeCode;

	
	
	
	
	/* 加载数据 */
	$scope.loadProjects=function(employeeCode){//alert(unitCode);
		$http.get(serviceBasePath+"eap/pmsServices/memberMove/isManager?employeeCode="+employeeCode).success(function(response){
			if(response.statusCode==401){
				alert("用户凭据过期！请重新登录！");
				window.top.location.href="../../login.html";
				return;
			}
			$scope.projectList = response.list;
			
		});
	};
	
	$scope.dateF=function(strTime){
		if(strTime!=null && strTime!=""){
			var date = new Date(strTime);
		    return date.getFullYear()+"年"+(date.getMonth()+1)+"月"+date.getDate()+"日";
		}
		return "";
	};
	
	$scope.dateD=function(sDate,eDate){
		if(sDate!=null && sDate!="" && eDate!=null && eDate!=""){
			var date = new Date(sDate);
			var date1 = new Date(eDate);
		    return date.getFullYear()+"年"+(date.getMonth()+1)+"月"+date.getDate()+"日"+" 至  "+date1.getFullYear()+"年"+(date1.getMonth()+1)+"月"+date1.getDate()+"日";
		}
		return "项目启动,竣工时间无数据";
	};
	
	$scope.dayshow=function(day){
			if(day){
				return day;
			}else{
				return " --- ";
			}
	};
	
	/* 初始查询 */
	$scope.loadProjects(employeeCode);

	
});
</script>
</body>
</html>
