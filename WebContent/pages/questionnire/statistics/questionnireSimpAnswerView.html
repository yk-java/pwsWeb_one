<!DOCTYPE html>
<html ng-app="moduleName">
<head>
<meta charset="UTF-8">
<title> 问卷答案查看 </title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<script type="text/javascript" src="../../../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../../js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script></head>
<script type="text/javascript" src="../../../angular-1.4.6/angular.min.js"></script>
<script type="text/javascript" src="../../../js/PageBar.js"></script>
<script type="text/javascript" src="../../../js/DropDownList-1.2/DropDownList-v1.2.js"></script>
<link rel="stylesheet" type="text/css" href="../../../js/DropDownList-1.2/DropDownList.css"/>
<script type="text/javascript" src="../../../js/Calendar.js"></script>
<script type="text/javascript" src="../../../js/config.js"></script>
<script type="text/javascript" src="../../../js/util.js"></script>
<script type="text/javascript" src="../../../js/ng-base.js"></script>

<script type="text/javascript" src="../../../js/eapJs/core/eap.core.js" ></script>
<script type="text/javascript" src="../../../js/eapJs/plugins/eap.tip.js" ></script>
<script type="text/javascript" src="../../../js/eapJs/plugins/eap.validate.js"></script>
<script type="text/javascript" src="../../../js/eapJs/local/eap.lang-zh_CN.js"></script>
<link rel="stylesheet" type="text/css" href="../../../css/common.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/validate.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/edit.css"/>

<script type="text/javascript" src="../../../js/showDlog/showDlog.js"></script>
<link rel="stylesheet" type="text/css" href="../../../js/showDlog/showDlog-blue.css" />
<style type="text/css">
	ul,li{margin:0;padding:0;}
	.title_save{display:inline-block;width:70px;height:28px;background: url(../../../img/btn_save.png) no-repeat 0 0;line-height:28px;text-align:center;margin-left:10px;margin-top:5px;color:#fff;cursor: pointer;}
	.title_save:hover{background: url(../../../img/btn_save.png) no-repeat 0 -29px;}
	.title_cancel{display:inline-block;width:70px;height:28px;background: url(../../../img/btn_cancel.png) no-repeat 0 0;line-height:28px;text-align:center;margin-left:10px;margin-top:5px;color:#666;cursor: pointer;}
	.title_cancel:hover{background: url(../../../img/btn_cancel.png) no-repeat 0 -29px;}
	
	.bottom_space{float:left;width:100%;height:80px; }
	.setting_box{width:700px;padding:10px 10px;position:relative;}
	.setting_box .questionnire_type{width:100px;}
	.edit_box, .preview_box{width:95%;padding:2px 10px;position:relative;}
	.edit_box.selected, .preview_box.selected{background:#FFF8CB;border:solid 1px #ff9900;margin:0 -1px;}

	.questionnire{float:left;position:absolute;top:50px;right:0;bottom:0;left:0;overflow-y:auto;}
	.questionnire_title>input{width:100%;}
	.questionnire_title>h2{text-align:center;}
	.questionnire_descr>textarea{width:100%;height:100px;}
	.questionnire_descr>p{text-indent:24px;line-height:22px;}
	.enabled_time{text-align:center;color:#888;}
	
	.group{float:left;}
	
	.question{float:left;}
	
	.question .title>h2{font-size:16px;margin:2px;}
	.question .num{width:40px;float:left;}
	.question .num>h3{margin:2px;color:#333;}
	.question .question_body{float:left;}
	.question .question_body .question_title{float:left;}
	.question .question_body .question_title>h3{margin:2px;color:#333;font-size:12px;}
	.question .question_body .question_title textarea{width:100%;height:80px;}
	.question .question_body .question_properties{}
	.question .question_body .question_properties .txt_score{width:40px;}
	.question .question_body .question_options{margin:0 0 0 10px;float:left;}
	.question .question_body .question_options ul li{float:left;list-style-type:none;margin:2px 10px 2px 0;color:#ff9900;font-size:12px;}
	.edit_box.question .question_body .question_options ul li{float:left;width:100%;list-style-type:none;margin:4px 10px 4px 0;}
	.question .question_body .question_options textarea{width:100%;}
	.question .question_body .question_options .supplement{color:#ff9900;border:0;border-bottom:solid 1px;width:240px;font-size:12px;}
	.question .question_body .question_options .txt_score{width:40px;}
	.question .question_body .question_options .txt_opt_label{width:200px;color:#ff9900;}
	.question .question_body .question_options .option_add{color:#3385FF;font-weight:bold;}
	.question .question_body .question_options .txt_area{color:#ff9900;margin:0;font-size:12px;}
	.radio{}
	.checkbox{}
	.text{}
	
</style>
</head>
<body ng-controller="controllerName" storagekey="questionnire.questionnireMgr.questionnireEdit">
<div class="list">
	<div class="list_content">
		<div class="title_div">
			<div class="title_left">
				<label class="title">问卷答案查看</label>
			</div>
			<img src="../../../img/list_Header2-.png">
			&nbsp;&nbsp;
			</a>
		</div>
		
		<form id="saveForm" class="required-validate">
		<div class="form_div questionnire" id="lay1">
			<div ng-repeat="question in questionnire.questions track by $index" partner="item_{{question.idx}}" class="question preview_box {{question.type}} {{question.subType?question.subType:''}}">
				<!-- group/title -->
<!-- 				<div ng-if="question.type=='group'" class="title"><h2>{{question.num}}、{{question.title}}</h2></div> -->
				<!-- question -->
				<div ng-if="question.type=='question'" class="num"><h3>{{question.num}}.</h3></div>
				<div ng-if="question.type=='question'" class="question_body">
					<div class="question_title"><h3>{{question.title}}</h3></div>
					
					<div ng-if="question.subType=='radio'" class="question_options">
						<ul>
							<li ng-repeat="option in question.options" ng-if="option.isAnswer==1">
								<label>{{option.num}}. {{option.optionLabel}}</label>
								<input ng-if="option.isSupplement" name="q{{question.num}}_supplement" readonly="readonly" value="{{option.supplement}}" class="supplement">
							</li>
						</ul>
					</div>
					<div ng-if="question.subType=='checkbox'" class="question_options">
						<ul>
							<li ng-repeat="option in question.options" ng-if="option.isAnswer==1">
								<label>{{option.num}}. {{option.optionLabel}}</label>
								<input ng-if="option.isSupplement" name="q{{question.num}}_supplement" readonly="readonly" value="{{option.supplement}}" class="supplement">
							</li>
						</ul>
					</div>
					<div ng-if="question.subType=='text'" class="question_options">
						<p class="txt_area">{{question.answer}}</p>
					</div>
				</div>
			</div>
			
			
		</div>
		<div class="bottom_space"></div>
		</form>
	</div>
</div>
<script type="text/javascript">
simpleController({
	init:function($scope, $http){
		$scope.questionnire={};
		var urlParams = getUrlParams();
		
		/* 初始化（查询） */
		$scope.init=function(){
			new ShowDlog().prompt({
				icon:"waitting",
				msg:"正在查询...",
				done:function(){},
				t:20*60*1000
			});
			$scope.httpExecute({
				url:"eap/pmsServices/questionnireStatistic/getUserAnswer",
				method:"GET",
				data:{"questionnireCode":urlParams.questionnireCode, "submitUser":urlParams.employeeCode},
				success:function(res){
					$dlog.close();
					if(res.statusCode==200){
						$scope.questionnire=res.data;
					}
				},
				error:function(){
					$dlog.close();
					new ShowDlog().prompt({
						msg:"网络异常",
						done:function(){},
						t:1500
					});
				}
			});
		};
		
		/* 取消 */
		$scope.onCancel=function(){
			history.go(-1);
		};
		$scope.init();
	}
});
</script>
</body>
</html>