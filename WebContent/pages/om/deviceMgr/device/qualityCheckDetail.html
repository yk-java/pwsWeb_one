<!DOCTYPE HTML>
<html>
<head>
<title>质量审核详细</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<script type="text/javascript" src="../../../../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../../../js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script></head>
<script type="text/javascript" src="../../../../angular-1.4.6/angular.min.js"></script>
<script type="text/javascript" src="../../../../js/PageBar.js"></script>
<script type="text/javascript" src="../../../../js/DropDownList-1.2/DropDownList-v1.2.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../js/DropDownList-1.2/DropDownList.css"/>
<script type="text/javascript" src="../../../../js/Calendar.js"></script>
<script type="text/javascript" src="../../../../js/util.js"></script>
<script type="text/javascript" src="../../../../js/config.js"></script>
<script type="text/javascript" src="../../../../js/ng-base.js"></script>

<script type="text/javascript" src="../../../../js/eapJs/core/eap.core.js" ></script>
<script type="text/javascript" src="../../../../js/eapJs/plugins/eap.tip.js" ></script>
<script type="text/javascript" src="../../../../js/eapJs/plugins/eap.validate.js"></script>
<script type="text/javascript" src="../../../../js/eapJs/local/eap.lang-zh_CN.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../css/validate.css"/>
<link rel="stylesheet" type="text/css" href="../../../../css/edit.css"/>
<link rel="stylesheet" type="text/css" href="../../../../css/common.css"/>
<script type="text/javascript" src="../../../../js/showDlog/showDlog.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../js/showDlog/showDlog-blue.css" />
<script src="../../../../js/jquery-photo-gallery/jquery.photo.gallery.js"></script>

<style type="text/css">
	.sel{font-family: '微软雅黑';font-size: 12px;width:204px;height:27px;}
	.materialList{}
	.materialList tr{border-bottom:dashed 1px #f4f4f4;height:30px;}
	.materialList tr.th{background:#EDF4FF;color:#418BF3;}
	
	.form_div .title{width:720px;height:30px;line-height:30px;background:#EDF4FF;color:#418BF3;}
	.form_div .title h3{color:#418BF3;}
	
	table td input[type=text] {min-width:40px;}
	.btn_group{position:absolute;left:430px;top:116px;}
	.btn_group a{color:#418BF3;}
	
	.detail_box .sub_table_title{margin:0;background:#EDF4FF;color:#2F82F7;height:30px;}
	.detail_box .sub_table_title h3{margin:0;color:#2F82F7;line-height:30px;display:inline-block;height:30px;float:left;margin:0 0 0 10px;font-weight:bold;font-size:14px;}
	
	.detail_box .sub_table_body{}
	.detail_box .sub_table_body .sub_table{width:100%;}
	.detail_box .sub_table_body .sub_table th{color:#2F82F7;padding:6px;border-bottom:solid 1px #f4f4f4;text-align:left;}
	.detail_box .sub_table_body .sub_table td{color:#666;padding:6px;border-bottom:solid 1px #f4f4f4;text-align:left;}
	
.imgitem {
	height: 250px;
	width: 184px;
	border: 1px #ccc solid;
	float: left;
	margin-right: 1px;
	margin-left: 5px;
	margin-top: 5px;
}

.imgs {
	width: 184px;
	height: 250px;
	z-index: -1
}

.eidtdiv {
	margin-left:123px;
	text-align: center;
	padding-top: 4px;
	position: absolute;
	font-family: '微软雅黑';
	font-size: 12px;
	height: 23px;
	width: 60px;
	filter: alpha(Opacity = 80);
	-moz-opacity: 0.5;
	opacity: 0.5;
	
	background-color: black;
}
.titlemess{
	width:184px;
	height:50px;
	background:red;
	position: absolute;
	margin-top:-54px;
	filter: alpha(Opacity = 90);
	-moz-opacity: 0.9;
	opacity: 0.9;
	background-color: #E6E6E6;
	text-align: center;
	color:#999;
	font-size:18px;
	
}
.eidtdiv a {
	color: #fff;
	cursor: pointer;
}

.eidtdiv a:HOVER {
	color: #3385FF;
}

.imgitem:HOVER {
	border: 1px red solid;
	cursor: pointer;
}

#bg {
	display: none;
	position: absolute;
	top: 0%;
	left: 0%;
	width: 100%;
	height: 100%;
	background-color: black;
	z-index: 95;
	-moz-opacity: 0.5;
	opacity: .50;
	filter: alpha(opacity = 50);
	text-align: center
}

#show {
	display: none;
	position: absolute;
	top: 28%;
	left: 28%;
	bottom: 35%;
	right: 28%;
	border: 2px solid #E8E9F7;
	background-color: white;
	z-index: 96;
	overflow: hidden;
	text-align: center;
}

#show img {
	height: 100%;
	width: 100%
}

#btnclose {
	position: absolute;
	z-index: 90;
	right: 0px;
	top: 0px
}
	.check_result{display:inline-block;padding:0 10px;height:20px;line-height:20px;background:#33cc00;border-radius:10px;color:#fff;}
	.red{background:#ff6600;}
</style>
</head>
<body ng-app="moduleName" ng-controller="controllerName">

<div class="list">
	<div class="list_content">
		<div class="title_div">
			<div class="title_left">
				<label class="title">详细信息</label>
			</div>
			<img src="../../../../img/list_Header2-.png">
			<a href="javascript:" ng-click="onCancel()" class="title_cancel">
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;关闭
			</a>
		</div>
		<div class="form_div" id="lay1">
			<div class="title">
				<h3 ng-if="qualityCheck.checkType==1">
					项目自检：
					<label ng-if="qualityCheck.checkResult==1" class="check_result">合格</label>
					<label ng-if="qualityCheck.checkResult==2" class="check_result red">不合格</label>
				</h3>
				<h3 ng-if="qualityCheck.checkType==2">
					质量专检：
					<label ng-if="qualityCheck.checkResult==1" class="check_result">合格</label>
					<label ng-if="qualityCheck.checkResult==2" class="check_result red">不合格</label>
				</h3>
			</div>
			<table width="500">
				<tr ng-if="qualityCheck.checkResult==2" style="height:30px;">
					<td colspan="2">问题分类：{{qualityCheck.faultName}}</td>
				</tr>
				<tr ng-if="qualityCheck.checkResult==2" style="height:30px;">
					<td colspan="2">问题描述：{{qualityCheck.faultDescr}}</td>
				</tr>
				<tr ng-if="qualityCheck.checkResult==2" style="height:30px;">
					<td colspan="2">是否已整改：
						<label ng-if="qualityCheck.isRectify==1" style="color:#ff0000;font-weight:bold;">未整改</label>
						<label ng-if="qualityCheck.isRectify==2" style="color:#33cc00;font-weight:bold;">已整改</label>
					</td>
				</tr>
				<tr style="height:30px;">
					<td width="50%">审核时间：{{qualityCheck.checkTime}}</td>
					<td width="50%">审核人：{{qualityCheck.checkUserName}}</td>
				</tr>
			</table>
	</div>
	<div class="form_div" style="width:720px;">
		<div class="imgitem gallerys" ng-repeat="item in qualityCheck.picItems">
<!-- 			<div class="eidtdiv"> -->
<!-- 				<a ng-click="showdiv($index,$index+1)">放大</a> -->
<!-- 			</div> -->
			<img src="{{item.url}}" id="pic_{{$index}}" class="imgs gallery-pic" onerror="javascript:this.src='../../../../img/defaultImg02.png';"	onclick="$.openPhotoGallery(this, '../../../../js/jquery-photo-gallery/gallery.html')" />
			<div class="titlemess">
				<p>{{$index+1}}</p>
			</div>
			
		</div>
	</div>
</body>
<script type="text/javascript">
simpleController({
	init:function($scope, $http){
		$scope.qualityCheck={};
		
		var urlParams = getUrlParams();
		
		$scope.loadQualityCheckRecord=function(){
			$scope.httpExecute({
				method:"get",
				url:"eap/pmsServices/om/deviceMgr/qualityCheck/get",
				data:{"rowid":urlParams.rowid},
				success:function(resp){
					$scope.qualityCheck = resp.data;
					$scope.dataTrim();
				}
			});
		};
		
		$scope.loadQualityCheckRecord();
		
		$scope.dataTrim=function(){
			var pics = $scope.qualityCheck.pics;
			if(!pics || pics.length==0){
				return;
			}
			var pics_str = pics.split(",");
			var picItems=[];
			for(var i in pics_str){
				var picCode = pics_str[i];
				var item={};
				item.picCode=picCode;
				item.url=filePath+"?fileCode="+picCode+"&attachment=0";
				picItems.push(item);
			}
			$scope.qualityCheck.picItems=picItems;
		};
		
		$scope.onCancel=function(){
			parent.$dlog.close();
		};
	}
});
</script>
</html>