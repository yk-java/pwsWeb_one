<!DOCTYPE HTML>
<html>
<head>
<title>加油卡管理</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<script type="text/javascript" src="../../../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../../js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script></head>
<script type="text/javascript" src="../../../angular-1.4.6/angular.min.js"></script>
<script type="text/javascript" src="../../../js/PageBar.js"></script>
<script type="text/javascript" src="../../../js/DropDownList-1.2/DropDownList-v1.2.js"></script>
<link rel="stylesheet" type="text/css" href="../../../js/DropDownList-1.2/DropDownList.css" />
<script type="text/javascript" src="../../../js/Calendar.js"></script>
<script type="text/javascript" src="../../../js/config.js"></script>


<script type="text/javascript" src="../../../js/eapJs/core/eap.core.js" ></script>
<script type="text/javascript" src="../../../js/eapJs/plugins/eap.tip.js" ></script>
<script type="text/javascript" src="../../../js/eapJs/plugins/eap.validate.js"></script>
<script type="text/javascript" src="../../../js/eapJs/local/eap.lang-zh_CN.js"></script>
<link rel="stylesheet" type="text/css" href="../../../css/validate.css"/>
<link rel="stylesheet" type="text/css" href="../../../css/edit.css"/>

<script type="text/javascript" src="../../../js/showDlog/showDlog.js"></script>
<link rel="stylesheet" type="text/css" href="../../../js/showDlog/showDlog-blue.css" />

<style type="text/css">
	.imgitem{height:250px;width:19%;border:1px #ccc solid;float:left;margin-right:1px;margin-left:5px;margin-top:5px;}
	.imgs{width:100%;height:100%}
	.eidtdiv{margin-left:105px;text-align:center; padding-top:8px;position:absolute;font-family: '微软雅黑';font-size:12px;height:27px;width:80px;filter:alpha(Opacity=80);-moz-opacity:0.5;opacity: 0.5;z-index:100;background-color:black;  }
	.eidtdiv a{color:#fff;cursor: pointer;}
	.eidtdiv a:HOVER{color:#3385FF;}
	.imgitem:HOVER{border:1px red solid}
	
	#bg{ 
	display: none;  
	position: absolute;  
	top: 0%;  
	left: 0%;  
	width: 100%;  
	height: 100%;  
	background-color: black;  
	z-index:1001;  
	-moz-opacity:0.5;  	
	opacity:.50;  
	filter: alpha(opacity=50);
}       
#show{
	display: none;  
	position: absolute;  
	top: 2%;  
	left: 31%; 
	 width: 33%;  
	height: 96%;  
	padding: 1px;  
	border: 2px solid #E8E9F7;  
	background-color: white; 
 	z-index:1002;  
	overflow: auto;
	
}  



#btnclose{position:absolute;z-index: 9999;right:0px;}
</style>
</head>

<body ng-app="userMgr" ng-controller="userMgrCtrl">

<div class="list">
	<div class="imgitem"  ng-repeat="item in imgList">
		<div class="eidtdiv"><a ng-click="showdiv($index)">放大</a> <span style="color:#fff">|</span> <a ng-click="deleteItem($index)">删除</a></div>
		<img src="{{item.url}}" class="imgs" />
	</div>
	
	<div class="imgitem">
	
		<img src="../../../img/adding.png" style="width:100%;height:100%" />
	</div>
	 
		 <div id="bg"><input type="button" style="z-index: 99999" value="旋转" /></div>  
 		 <div id="show">   
  			<img id="showimg" src="../../../img/testimg/1.png" style="position: absolute;left:0px;top:0px;right:0px;bottom:0px;width:100%;height:96%;" />
  			<input id="btnclose" type="button" value="Close" onclick="hidediv();" />   
 		 </div>
	
</div>
<script type="text/javascript">

   function hidediv() {         
		document.getElementById("bg").style.display = 'none';       
		 document.getElementById("show").style.display = 'none';
    } 
var validator;
var ngScope;
var userData;
var app = angular.module("userMgr", []);
app.controller("userMgrCtrl", function($scope, $http){
	/* init */
	ngScope = $scope;
	$scope.curUnit={};
	$scope.imgList=[];
	
	var mydate = new Date();
	//alert(mydate.getFullYear()+"-"+(mydate.getMonth()+1)+"-"+mydate.getDate());
	
	$("input[name=matterTime]").val(mydate.getFullYear()+"-"+(mydate.getMonth()+1)+"-"+mydate.getDate());
	
	var userDataStr = $.cookie("pmsWeb_user_data");
	if(!userDataStr){
		
		noLogin(location.href);
		return; 
	}
	userData = jQuery.parseJSON(userDataStr);
	ticket = $.cookie("pmsWeb_ticket");
	
	$("input[name=companyCode]").val(userData.companyCode);
	
	
	$scope.imgList=[{url:'../../../img/testimg/1.png'},{url:'../../../img/testimg/2.png'},{url:'../../../img/testimg/3.png'},{url:'../../../img/testimg/1.png'},{url:'../../../img/testimg/2.png'},{url:'../../../img/testimg/3.png'}];
	
	
	/* 保存 */
	$scope.onSave = function(){
		
		var formData = $("#saveForm").serialize();
		
		if($("#saveForm").valid()){
			$.ajax({
				url:serviceBasePath+"eap/pmsServices/pe/baseMgr/materialType/add",
				cache:false,
				method:"POST",
				data:formData,
				success:function(res){
					if(res.statusCode==200){
						new ShowDlog().prompt({msg:"添加成功！",
							done:function(){
								location.href="materialTypeMgr.html";
							},
							t:1500
						});
					}else{
						//
					}
				},
				error:function(){
					
				}
			});
		}else{
			
		}
	};
	
	
	$scope.showdiv=function(id){
		
		$("#showimg").attr("src",$scope.imgList[id].url);
		document.getElementById("bg").style.display = "block";           
		document.getElementById("show").style.display = "block";
	
	};
	
	$scope.deleteItem=function(id){
		//$scope.imgList.remove(1)
		// 通过索引删除数组元素
		   
		   
			for(var i=id; i<$scope.imgList.length-1; i++){
				var temp = $scope.imgList[i];
				$scope.imgList[i]=$scope.imgList[i+1];
				$scope.imgList[i+1]=temp;
			}
		$scope.imgList.pop();
		
	};
	
	/* 取消 */
	$scope.onCancel = function(){
		location.href="materialTypeMgr.html";
	};
	
});
</script>
</body>
</html>
