<!DOCTYPE HTML>
<html>
<head>
<title>物资入库详情</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
<script type="text/javascript" src="../../../../../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../../../../js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../../../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script></head>
<script type="text/javascript" src="../../../../../angular-1.4.6/angular.min.js"></script>
<script type="text/javascript" src="../../../../../js/PageBar.js"></script>
<script type="text/javascript" src="../../../../../js/DropDownList-1.2/DropDownList-v1.2.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../../js/DropDownList-1.2/DropDownList.css" />
<script type="text/javascript" src="../../../../../js/Calendar.js"></script>
<script type="text/javascript" src="../../../../../js/config.js"></script>
<script type="text/javascript" src="../../../../../js/SimpleDateFormat.js"></script>

<script type="text/javascript" src="../../../../../js/util.js"></script>
<script type="text/javascript" src="../../../../../js/eapJs/core/eap.core.js" ></script>
<script type="text/javascript" src="../../../../../js/eapJs/plugins/eap.tip.js" ></script>
<script type="text/javascript" src="../../../../../js/eapJs/plugins/eap.validate.js"></script>
<script type="text/javascript" src="../../../../../js/eapJs/local/eap.lang-zh_CN.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../../css/validate.css"/>
<link rel="stylesheet" type="text/css" href="../../../../../css/edit.css"/>
<script type="text/javascript" src="../../../../../js/jquery.form.js"></script>

<script type="text/javascript" src="../../../../../js/showDlog/showDlog.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../../js/showDlog/showDlog-blue.css" />

<script type="text/javascript" src="../../../../../js/DropDownList-1.2/DropDownList-v1.2.js"></script>
<link rel="stylesheet" type="text/css" href="../../../../../js/DropDownList-1.2/DropDownList.css" />

<style type="text/css">
	#saveForm *{color:#999}
	.addBtn{padding:3px 8px;border-radius:5px;border:1px solid #797979;color:#797979;cursor:pointer;}
	.addBtn:hover{background:#eee}
	.dlog-edit2{width:500px;height:350px;}
	.addDataList_tr{height: 40px;line-height: 40px;border-bottom:1px solid #ccc}
	.addDataList_tr.th{font-weight: bold;}
</style>
</head>

<body ng-app="userMgr" ng-controller="userMgrCtrl">

<div class="list">
	<div class="list_content">
		<div class="title_div">
			<div class="title_left">
				<label class="title">废料出入库详情</label>
			</div>
			<img src="../../../../../img/list_Header2-.png">
		</div>
		<div class="tabs">
			<a href="#lay1" class="tab selected">基本信息</a>
		</div>
		<form id="saveForm" class="required-validate">
		<div class="form_div" id="lay1">
			<table>
				<tr>
					<th>标题</th>
					<td><input type="text" name="processTitle" class="readonly" readonly="readonly" value="{{getItemData.PROCESS_TITLE}}"/></td>
					<th>项目类别</th>
					<td>
						<input type="text" class="readonly" readonly="readonly" value="{{getItemData.CATEGORY_NAME}}" style="width:180px;" placeholder="项目类别"/>
					</td>	
				</tr>
				<tr>
					<th>项目名称</th>
					<td>
						<input type="text"  class="readonly" readonly="readonly" value="{{getItemData.PRO_NAME}}" style="width:180px;" placeholder="请选择项目"/>
					</td>
					<th>流程类型</th>
					<td>
						<input type="text" class="readonly" readonly="readonly"  value="{{getItemData.PROCESS_TYPE_Name}}" style="width:180px;" placeholder="请选择流程类型"/>
					</td>
				</tr>
				<tr ng-if="getItemData.PROCESS_STATUS==4||getItemData.PROCESS_STATUS==5">
					<th>审核时间</th>
					<td colspan="3">
						<input type="text" value="{{getItemData.STOREMAN_AUDIT_TIME}}"  class="readonly" readonly="readonly">
					</td>
				</tr>
				<tr ng-if="getItemData.PROCESS_STATUS==6||getItemData.PROCESS_STATUS==7">
					<th>审核时间</th>
					<td colspan="3">
						<input type="text" value="{{getItemData.FINANCE_AUDIT_TIME}}"  class="readonly" readonly="readonly">
					</td>
				</tr>
				<tr ng-if="getItemData.PROCESS_TYPE==1 && getItemData.PROCESS_STATUS==4||getItemData.PROCESS_STATUS==5">
					<th>审核描述</th>
					<td colspan="3">
						<textarea style="width:100%;height:80px"  class="readonly" readonly="readonly">{{getItemData.STOREMAN_AUDIT_DESC}}</textarea>
					</td>
				</tr>
				<tr ng-if="getItemData.PROCESS_TYPE==2 && getItemData.PROCESS_STATUS==6||getItemData.PROCESS_STATUS==7">
					<th>审核描述</th>
					<td colspan="3">
						<textarea style="width:100%;height:80px"  class="readonly" readonly="readonly">{{getItemData.FINANCE_AUDIT_DESC}}</textarea>
					</td>
				</tr>
			</table>
		</div>
		<div class="tabs">
			<a href="#lay1" class="tab selected">物资列表</a>
		</div>
		<div class="form_div" id="lay12">
			<table width="600px" class="table1">
				<tr class="addDataList_tr th">
					<td align="center"><div class="table_title">名称</div></td>
					<td align="center"><div class="table_title">数量</div></td>
					<td align="center" ng-if="getItemData.PROCESS_TYPE==2"><div class="table_title">价格</div></td>
					<td align="center"><div class="table_title">仓库</div></td>
				</tr>
				<tr ng-repeat="item in addDataList" class="addDataList_tr">
					<td align="center"><div>{{item.categoryName}}</div></td>
					<td align="center"><div>{{item.num}}</div></td>
					<td align="center" ng-if="getItemData.PROCESS_TYPE==2"><div>{{item.price}}</div></td>
					<td align="center"><div>{{item.storeName}}</div></td>
				</tr>
			</table>
		</div>
		</form>
		<div class="form_bottom">
			<a href="javascript:" ng-click="onCancel()" class="title_cancel">
				&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;取消
			</a>
		</div>
		
	</div>
</div>
<script type="text/javascript">
var ngScope;
var userData;
var app = angular.module("userMgr", []);
app.controller("userMgrCtrl", function($scope, $http){
	/* init */
	ngScope = $scope;
	$scope.curUnit={};
	$scope.userList=[];
	
	var userDataStr = $.cookie("pmsWeb_user_data");
	if(!userDataStr){
		
		noLogin(location.href);
		return;
	}
	userData = jQuery.parseJSON(userDataStr);
	ticket = $.cookie("pmsWeb_ticket");
	$scope.urlParams = getUrlParams();
	var processCode=$scope.urlParams.processCode;
	$http.get(serviceBasePath+"eap/pmsServices/goods/getWasteProcessDetail?processCode="+processCode).success(function(response){
		if(response.statusCode==401){
			alert("用户凭据过期！请重新登录！");
			window.top.location.href="../../login.html";
			return;
		}
		$scope.getItemData=response.data.goodObj;
		if($scope.getItemData.PROCESS_TYPE==1){
			$scope.getItemData.PROCESS_TYPE_Name="废料入库"
		}else if($scope.getItemData.PROCESS_TYPE==2){
			$scope.getItemData.PROCESS_TYPE_Name="废料出库"
		}
		$scope.addDataList=response.data.goodslist;
		if($scope.getItemData.PIC1&&$scope.getItemData.PIC1!=''){
			$scope.st=filePath+"?fileCode="+$scope.getItemData.PIC1+"&attachment=0";
			$("#lldImg").attr("src",$scope.st);
		}
	});
	/* 取消 */
	$scope.onCancel = function(){
		location.href="wasteStorageList.html";
	};
});
</script>
</body>
</html>
