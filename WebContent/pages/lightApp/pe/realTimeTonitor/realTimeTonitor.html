<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8" />
	<title>Document</title>
	<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
	<script src="../js/jquery-1.9.1.min.js"></script>
	<script src="../js/jquery.cookie.js"></script>
	<script src="../js/angular.min.js"></script>
	<script src="../js/util.js"></script>
	<script src="../js/ng-base.js"></script>
	<script src="../../../../js/echarts-all.js"></script>
	<script type="text/javascript" src="../js/showDlog/showDlog.js"></script>
	<link rel="stylesheet" type="text/css" href="../js/showDlog/showDlog-blue.css" />
	<link rel="stylesheet" type="text/css" href="../css/bxyw.css"/>
	
	<style type="text/css">
		header{position:absolute;top:0;right:0;left:0;height:60px;}
		section{position:absolute;top:60px;right:0;bottom:0;left:0;overflow:auto;}
		.filter_no1{margin-right:8px;}
	</style>
</head>
<body>
	<header>
		<div class="return" ng-click="exit()"><img src="../images/return.png"/></div>
		实时监测
		<div id="map_list-toggle" style="position:absolute;color:#fff;right:15px;top:0;cursor:pointer">图表</div>
	</header>
	<section id="list">
		<ul class="cz_selpx ov" >
			<li class="fl" style="height:50px;line-height:50px">筛选<img src="../images/down_icon.png"/></li>
			<li class="fl" style="height:50px;line-height:50px">排序<img src="../images/down_icon.png"/></li>
		</ul>
		<div class="filter_sort">
			<ul class="filter"  style="display: none;">
				<li class="ov">
					<div class="filter_con">
						<!-- <div class="filter_search">
							<div class="search_int">
								<input type="text" name="search" id="search" placeholder="输入终端地址或用户地址"/>
								<a class="clear_search">x</a>
							</div>
							<span id="btn-search">搜索</span>
						</div> -->
					</div>
				</li>
				<li class="ov" style="height:38px">
					<div class="filter_con">
						<span class="fl tspan"></span>
						<div class="fl ov">
							<div class="fl ov filter_no1"><img src="../images/task_nonselete_icon.png" data-type="2" class="fl"/><div class="fl">温度</div></div>
							<div class="fl ov filter_no1"><img src="../images/task_nonselete_icon.png" data-type="1" class="fl"/><div class="fl">湿度</div></div>
							<div class="fl ov filter_no1"><img src="../images/task_nonselete_icon.png" data-type="0" class="fl"/><div class="fl">噪音</div></div>
							<div class="fl ov filter_no1"><img src="../images/task_nonselete_icon.png" data-type="0" class="fl"/><div class="fl">扬尘</div></div>
						</div>
					</div>
				</li>
			</ul>
		</div>
		<div class="con_list">
			<a href="javascript:" ng-click="toSee(item)">
				<div class="title">
					<span style="color:red;">温度</span>
					<p class="zdgz_address">监测点1：23.4℃</p>
				</div>
			</a>
		</div>
		<div class="con_list">
			<a href="javascript:" ng-click="toSee(item)">
				<div class="title">
					<span style="color:blue;">湿度</span>
					<p class="zdgz_address">监测点1：23.4℃</p>
				</div>
			</a>
		</div>
		<div class="con_list">
			<a href="javascript:" ng-click="toSee(item)">
				<div class="title">
					<span style="color:#ffa10e;">噪音</span>
					<p class="zdgz_address">监测点1：23.4℃</p>
					<p class="zdgz_address">监测点2：23.4℃</p>
					<p class="zdgz_address">监测点3：23.4℃</p>
				</div>
			</a>
		</div>
		<div class="con_list">
			<a href="javascript:" ng-click="toSee(item)">
				<div class="title">
					<span style="color:#81ce1e;">扬尘</span>
					<p class="zdgz_address">监测点1：23.4℃</p>
				</div>
			</a>
		</div>
	</section>
	<section id="map" style="display:none;">
		<div id="mapdiv" style="height:300px;width:100%;background:url('../../img/timg.jpg') no-repeat top center">
			
		</div>
	</section>
	
	
	<script type="text/javascript">
		var flag=0;
		$("#map_list-toggle").click(function(){
			if(flag==0){
				$("#map").show();
				$("#list").hide();
				flag=1;
				
				var myChart = echarts.init(document.getElementById('mapdiv'));
				
				option = {
					    title : {
					        text: '',
					        /* subtext: '' *//* 小标题  */
					    },
					    tooltip : {
					        trigger: 'axis',
					        showDelay : 0,
					        formatter : function (params) {
					            if (params.value.length > 1) {
					                return params.seriesName + ' :<br/>'
					                   + params.value[0] + 'cm ' 
					                   + params.value[1] + 'kg ';
					            }
					            else {
					                return params.seriesName + ' :<br/>'
					                   + params.name + ' : '
					                   + params.value + 'kg ';
					            }
					        },  
					        axisPointer:{
					            show: true,
					            type : 'cross',
					            lineStyle: {
					                type : 'dashed',
					                width : 1
					            }
					        }
					    },
					    legend: {
					        data:['温度','湿度','噪音','扬尘']
					    },
					   
					    xAxis : [
					        {
					            type : 'value',
					          	show:false,
					            scale:true,
					            axisLabel : {
					                formatter: '{value} cm'
					            }
					        }
					    ],
					    yAxis : [
					        {
					          	show:false,
					            type : 'value',
					            scale:true,
					            axisLabel : {
					                formatter: '{value} kg'
					            }
					        }
					    ],
					    series : [
					        {
					            name:'温度',
					            type:'scatter',
					            data: [[167.5, 59.0], [159.5, 49.2], [157.0, 63.0], [155.8, 53.6],
					                [170.0, 59.0], [159.1, 47.6], [166.0, 69.8], [176.2, 66.8], [160.2, 75.2],
					                [151.1, 48.7], [164.5, 52.3], [163.5, 50.0], [152.0, 59.3], [169.0, 62.5],
					            ],
					        },
					        {
					            name:'湿度',
					            type:'scatter',
					            data: [[174.0, 65.6], [175.3, 71.8], [193.5, 80.7], [186.5, 72.6], [187.2, 78.8],
					                [181.5, 74.8], [184.0, 86.4], [184.5, 78.4], [175.0, 62.0], [184.0, 81.6],
					                [180.3, 83.2], [180.3, 83.2]
					            ],
					           
					        },
					        {
					            name:'噪音',
					            type:'scatter',
					            data: [[174.0, 65.6], [175.3, 71.8], [193.5, 80.7], [186.5, 72.6], [187.2, 78.8],
					                [181.5, 74.8], [184.0, 86.4], [184.5, 78.4], [175.0, 62.0], [184.0, 81.6],
					                [180.0, 76.6], [177.8, 83.6], [192.0, 90.0], [176.0, 74.6], [174.0, 71.0],
					            ],
					        },
					        {
					            name:'扬尘',
					            type:'scatter',
					            data: [[174.0, 65.6], [175.3, 71.8], [193.5, 80.7], [186.5, 72.6], [187.2, 78.8],
					                [181.5, 74.8], [184.0, 86.4], [184.5, 78.4], [175.0, 62.0], [184.0, 81.6],
					                [180.0, 76.6], [177.8, 83.6], [192.0, 90.0], [176.0, 74.6], [174.0, 71.0],
					                [188.0, 83.6], [198.1, 85.5], [175.3, 90.9], [166.4, 85.9], [190.5, 89.1],
					                [180.3, 83.2], [180.3, 83.2]
					            ],
					        }
					    ]
					};
				myChart.setOption(option);
			}else{
				$("#map").hide();
				$("#list").show();
				flag=0;
				
			}
		})
	
	
		/* 查询条件 */
		$(".filter_no1").each(function(){
			$(this).click(function(){
				var selected = $(this).find("img").attr("data-selected");
				if(selected=="selected"){
					// unselect
					unselectEle($(this));
				}else{
					// select
					selectEle($(this));
				}
				// I
				var data_type = $(".filter_no1").find("img[data-selected=selected]").attr("data-type");
				typeChange(data_type);
			})
		});
		
		function unselectEle($el){
			$el.find("img").attr("src","../images/task_nonselete_icon.png");
			$el.find("img").attr("data-selected", "");
		}
		function selectEle($el){
			$el.find("img").attr("src","../images/task_selete_icon.png");
			$el.siblings().find("img").attr("src","../images/task_nonselete_icon.png");
			$el.find("img").attr("data-selected", "selected");
			$el.siblings().find("img").attr("data-selected", "");
		}
		var timeType=null;
		function typeChange(type){
			timeType = type;
		}
	
		$(".clear_search").click(function(){
			$(".search_int input").val("");
		});
		
		/* 搜索 */
		$("#btn-search").click(function(){
			var searchName = $("#search").val();
			if(!timeType)
				timeType="";
// 			alert(searchName+", "+ timeType+", "+ sortType);
			ngScope.loadDataList(timeType, sortType, searchName);
		});
		/* 排序 */
		var sortType=1;
		$(".sort li").each(function(){
			$(this).click(function(){
				$(this).find("img").show();
				$(this).siblings().find("img").hide();
				sortType = $(this).attr("data-sort");
				sortTypeChange(sortType);
			})
		});
		function sortTypeChange(sortType){
			//
		}
		/* 互斥Tab页 */
		$(".cz_selpx li").click(function(){
			var n = $(this).index();
			var tab = $(".filter_sort ul").eq(n);
			if(tab.attr("is_show")=="true"){
				tab.hide();
				tab.attr("is_show", "false");
			}else{
				tab.show().siblings().hide();
				tab.attr("is_show", "true");
				$(".filter_sort ul").each(function(){
					var ulIndex = $(this).index();
					if(n!=ulIndex){
						$(this).hide();
						$(this).attr("is_show", "false");
					}
				});
			}
		});
		
	/* 	var ngScope;
		simpleController({
			init:function($scope, $http){
				ngScope=$scope;
				$scope.dataList=[];
				$scope.taskCount={};
				var urlParams = getUrlParams();
				$scope.loadDataList=function(type, sort, searchName){
					$scope.httpGet({
						url:"eap/pmsServices/pm/taskMgr/task/userTaskList",
						data:{"employeeCode":$scope.userData.employeeCode,
							"type":type, "sort":sort, "searchName":searchName},
						success:function(res){
							$scope.dataList = res.list;
						}
					});

					$scope.httpGet({
						url:"eap/pmsServices/pm/taskMgr/task/findTaskCount",
						data:{"employeeCode":$scope.userData.employeeCode,
							"type":type, "searchName":searchName},
						success:function(res){
							$scope.taskCount=res.data;
						}
					});
				};

				$scope.toSee=function(item){
					if(item.total>1){
						top.viewTo(
							"pe/materList.html",
							{"terminalId":item.TERMINAL_ID,
								"faultType":item.FAULT_TYPE}
						);						
					}else{
						top.viewTo(
							"pe/terminalFault.html",
							{"terminalId":item.TERMINAL_ID,
								"faultType":item.FAULT_TYPE}
						);		
					}
				};

				$scope.exit=function(){
					if(urlParams.web==1){
						top.history.back();
					}else{
						top.nativeLib.exitApp();
					}
					
				};
				
				$scope.loadDataList("", 1, "");
			}
		}); */
	</script>
</body>
</html>