<!doctype html>
<html ng-app="orgMgr">
<head>
	<meta charset="UTF-8" />
	<title>·</title>
	<link rel="stylesheet" type="text/css" href="../../bootstrap-3.3.5-dist/css/bootstrap.min.css"/>
	<link rel="stylesheet" href="../../css/zTreeStyle/zTreeStyle.css" type="text/css">
	<script type="text/javascript" src="../../js/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="../../js/jquery.cookie.js"></script>
	<script type="text/javascript" src="../../js/jquery.ztree.core-3.5.js"></script>
	<script type="text/javascript" src="../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script></head>
	<script type="text/javascript" src="../../angular-1.4.6/angular.min.js"></script>
	<script type="text/javascript" src="../../js/PageBar.js"></script>
	<script type="text/javascript" src="../../js/config.js"></script>
	<script type="text/javascript" src="../../js/util.js"></script>
	<script type="text/javascript" src="../../js/ng-base.js"></script>
	<script type="text/javascript" src="../../js/showDlog/showDlog.js"></script>
	<link rel="stylesheet" type="text/css" href="../../js/showDlog/showDlog-blue.css" />
	<link rel="stylesheet" type="text/css" href="../../css/list.css"/>
	<link rel="stylesheet" type="text/css" href="../../css/knowledge/knowledge.css"/>
	
</head>
<body  ng-controller="orgMgr">
	<div class="map_warp">
		<p class="warp_title">·&nbsp;&nbsp;知识地图</p>
		<div class="mapwarp_con">
			<div class="mapwarp_model">
				<ul>
					<li ng-repeat="item1 in parentarr">
						<div class="model_left"><span>{{item1.catalogName}}</span></div>
						 <div class="model_right">
							<span ng-repeat="item2 in childenarr" ng-if="item2.parentCode ==item1.catalogCode"><a href="#" ng-click="showdoclist(item2)">{{item2.catalogName}}<em>{{item2.fileNum}}</em></a></span>
						</div>  
					</li>
				</ul>
			</div>
		</div>
	</div>
</body>
<script>
	var app = simpleController({
		moduleName:"orgMgr",
		controllerName:"orgMgr",
		init:function($scope, $http){
			$scope.dataList=[];
			$scope.httpGet({
				url:"eap/pmsServices/km/kmbase/kmbase/catalogMap",
				data:{"companyCode":$scope.userData.companyCode},
				success:function(res){
					$scope.dataList=res.list;
				
					$scope.parentarr=[];
					$scope.childenarr=[];
					 for(var i=0;i<$scope.dataList.length;i++){
						 
						 var iarr=$scope.dataList[i];
						if(iarr.parentCode == "0"){
							$scope.parentarr.push(iarr);
						}else{
							$scope.childenarr.push(iarr);
						}
					}
				}
			});
			
			$scope.showdoclist=function(obj){
				location.href="knowledgemaplist.html?catalogCode="+obj.catalogCode;
			}
		}
	})
</script>


</html>