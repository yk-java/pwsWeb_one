<!DOCTYPE HTML>
<html ng-app="orgMgr">
<head>
<title> 组织架构管理</title>
<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">

<link rel="stylesheet" type="text/css" href="../../bootstrap-3.3.5-dist/css/bootstrap.min.css"/>

<link rel="stylesheet" href="../../css/zTreeStyle/zTreeStyle.css" type="text/css">
<script type="text/javascript" src="../../js/jquery-1.9.1.min.js"></script>
<script type="text/javascript" src="../../js/jquery.cookie.js"></script>
<script type="text/javascript" src="../../js/jquery.ztree.core-3.5.js"></script>
<script type="text/javascript" src="../../bootstrap-3.3.5-dist/js/bootstrap.min.js"></script></head>
<script type="text/javascript" src="../../angular-1.4.6/angular.min.js"></script>
<script type="text/javascript" src="../../js/PageBar.js"></script>
<script type="text/javascript" src="../../js/config.js"></script>
<script type="text/javascript" src="../../js/util.js"></script>
<script type="text/javascript" src="../../js/ng-base.js"></script>

<script type="text/javascript" src="../../js/showDlog/showDlog.js"></script>
<link rel="stylesheet" type="text/css" href="../../js/showDlog/showDlog-blue.css" />

<link rel="stylesheet" type="text/css" href="../../css/list.css"/>
<style type="text/css">

	.list .list_left{position: absolute;left:0px;top:0px;bottom:0px;width:220px;background:#E5F0FF;}
	.list .list_left .left_title{width:100%;height:30px;background:#3385FF;line-height:30px;color:#fff;border-bottom:solid 1px #4CA9FF;}
	.list .list_left .left_operation{width:100%;height:30px;background:#3385FF;line-height:30px;color:#fff;}
	.list .list_left .left_operation .operation1{height:30px;width:72px;border-right:solid 1px #4CA9FF;line-height:28px;text-align: center;color:#fff;float:left;cursor: pointer;}
	.list .list_left .left_operation .operation1 > a{color:#fff;vertical-align: middle;}
	.list .list_left .left_operation .operation2{height:30px;width:72px;line-height:28px;text-align: center;color:#fff;float:left;cursor: pointer;}
	.list .list_left .left_operation .operation2 > a{color:#fff;vertical-align: middle;}
	.list .list_left .left_tree{position: absolute;left:0px;right:0px;bottom:0px;top:30px;border:solid 0px;overflow: auto;}
	.list .list_content .title_div{width:100%;height:39px;border-bottom:solid 3px #3385FF;}
	.list .list_content .title_div .title_left{min-width:250px;height:39px;background:#3385FF;line-height:42px;color:#fff;font-size:14px;font-weight: bold;float:left;}
	.list .list_content .title_div > img{float:left;margin-top:1px;}
	.list .list_content .title_div .title_add{float:left;width:70px;height:28px;background: url(../../img/bnt_newly-added.png) repeat;line-height:28px;text-align:center;margin-left:30px;margin-top:5px;color:#fff;cursor: pointer;}
	.list .list_content .table_div{left:0px;right:0px;bottom:32px;top:42px;border:solid 0px;}

	.ztree span{font-family:微软雅黑;}

.edit-deptment{width:800px;height:450px;}
</style>

<body ng-controller="orgMgr">

<div class="list">
	<div class="list_content">
		<div class="title_div">
			<div class="title_left">
				&nbsp;&nbsp;&nbsp;&nbsp;知识文档管理
			</div>
			<img src="../../img/list_Header-.png">
		</div>
		
		<div class="table_div">
			<table width="100%" border="0" cellspacing="0" cellpadding="0" class="table">
			   <tr class="tr1">
				<th width="5%"><div align="center">序号</div></th>
				<th width="15%"><div align="center">文档名称</div></th>
				<th width="10%"><div align="center">关键字</div></th>
				<th width="10%"><div align="center">目录</div></th>
				<th width="5%"><div align="center">作者</div></th>
				<th width="10%"><div align="center">时间</div></th>
				<th width="5%"><div align="center">阅读次数</div></th>
				<th width="5%"><div align="center">下载次数</div></th>
				<th width="10%"><div align="center">状态</div></th>
				<th width="10%"><div align="center">操作</div></th>
			  </tr>
			  <tr class="tr2" ng-repeat="item in dataList">
				<td><div align="center">{{$index+1}}</div></td>
				<td><div align="center">{{item.fileTitle}}</div></td>
				<td><div align="center">{{item.keywords}}</div></td>
				<td><div align="center">{{item.catalogName}}</div></td>
				<td><div align="center">{{item.employeeName}}</div></td>
				<td><div align="center">{{item.sysCreateTime}}</div></td>
				<td><div align="center">{{item.readCnt}}</div></td>
				<td><div align="center">{{item.downloadCnt}}</div></td>
				<td>
					<div align="center" ng-if="item.publishStatus==1">创建</div>
					<div align="center" ng-if="item.publishStatus==2">发布</div>
					<div align="center" ng-if="item.publishStatus==3">收回</div>
				</td>
				<td>
					<div align="center">
						<!-- <img class="operationImg" ng-click="toEdit(item)" src="../../img/list_item_modify-icon.png">
						<img class="operationImg" ng-click="doDel(item)" src="../../img/list_delete-icon.png"> -->
						<img class="operationImg" ng-click="doShow(item)" src="../../img/list_see-icon.png" title="查看正文 ">
		    		</div>
		    	</td>
			  </tr>
			</table>
		</div>

		<div id="page_bar" class="list_bottom" align="center">
		</div>

	</div>
</div>

<script type="text/javascript">

function createPageBar(totalPage, curPage){
	new PageBar().init({
		renderTo:"#page_bar",
		totalPage:totalPage,
		curPage:curPage,
		prevPageText:"上一页",
		nextPageText:"下一页",
		onPage:function(pageNum){
			_currentPage=pageNum;
			ngScope.getList(parentCatalogCode,_currentPage);
		}
	});
}

var app = simpleController({
	moduleName:"orgMgr",
	controllerName:"orgMgr",
	init:function($scope, $http){
	
	var urlParams = getUrlParams(); 
	$scope.httpGet({
		url:"eap/pmsServices/km/kmbase/kmbase/list",
		data:{"companyCode":$scope.userData.companyCode,"catalogCode":urlParams.catalogCode},
		success:function(res){
		$scope.dataList=res.list;
		//createPageBar(res.totalPage, res.currentPage);
		//alert(res.list.length)
		}
	});

		
		
		
		
		
		$scope.doShow=function(obj){
			location.href="knowcon.html?rowid="+obj.rowid+"&companyCode="+$scope.userData.companyCode;
		}
			
	
		
	}
});

	
</script>
</body>
</html>
