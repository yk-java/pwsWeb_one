<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.glens.pwCloudOs.pm.everydayMgr.expInfoColle.dao.ExpInfoColleVoMapper" >
  <resultMap id="BaseResultMap" type="com.glens.pwCloudOs.pm.everydayMgr.expInfoColle.vo.ExpInfoColleVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    
    <result column="rowid" property="rowid"  />
    <result column="COMPANY_CODE" property="companyCode" jdbcType="VARCHAR" />
    <result column="EMPLOYEECODE" property="employeeCode" jdbcType="VARCHAR" />
    <result column="EMPLOYEENAME" property="employeeName" jdbcType="VARCHAR" />
    <result column="PHONE" property="phone" jdbcType="VARCHAR" />
    <result column="EX_PRO_NAME" property="exproName" jdbcType="VARCHAR" />
    <result column="EX_PRO_SCOPE" property="exproScope" jdbcType="VARCHAR" />
    <result column="EX_PRO_TYPE" property="exproType" jdbcType="VARCHAR" />
    <result column="EX_PRO_T_PRICE" property="exproTprice" jdbcType="REAL" />
    <result column="EX_PRO_U_PRICE" property="exproUprice" jdbcType="VARCHAR" />
    <result column="OWNER_NAME" property="ownerName" jdbcType="VARCHAR" />
    <result column="OWNER_RESPONSIBLER" property="ownerResponsibler" jdbcType="VARCHAR" />
    <result column="OWNER_NEEDS" property="ownerNeeds" jdbcType="VARCHAR" />
    <result column="S_DATE" property="sdate" jdbcType="VARCHAR" />
    <result column="E_DATE" property="edate" jdbcType="VARCHAR" />
    <result column="B_DATE" property="bdate" jdbcType="VARCHAR" />
    <result column="MARKETOR" property="marketor" jdbcType="VARCHAR" />
    <result column="IS_CONTRACT" property="isContract" jdbcType="VARCHAR" />
    <result column="REMARKS" property="remarks" jdbcType="VARCHAR" />
 
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    a.rowid,a.COMPANY_CODE,a.EMPLOYEECODE,a.EMPLOYEENAME,a.PHONE,a.EX_PRO_NAME,a.EX_PRO_SCOPE,a.EX_PRO_TYPE,a.EX_PRO_T_PRICE,a.EX_PRO_U_PRICE,
	a.OWNER_NAME,a.OWNER_RESPONSIBLER,a.OWNER_NEEDS,a.S_DATE,a.E_DATE,a.B_DATE,a.MARKETOR,a.IS_CONTRACT,a.REMARKS
  </sql>
  
 <select id="queryForCount" parameterType="java.util.HashMap" resultType="int">
 	select count(*) from pm_expand a
 	 where a.sys_process_flag='1'
 	 <if test="employeeCode != null and employeeCode != ''">
	and a.EMPLOYEECODE = #{employeeCode}
	</if>
	<if test="fromDate != null and fromDate != ''">
		and a.B_DATE &gt;= #{fromDate}
	</if>
	 <if test="toDate != null and toDate != ''">
		and a.B_DATE &lt;= #{toDate}
	</if>
 </select>
 
 <select id="queryForPage" parameterType="java.util.HashMap" resultMap="BaseResultMap">
 	select 
    <include refid="Base_Column_List" />
    from pm_expand a
    
    where a.sys_process_flag='1'
    <if test="employeeCode != null and employeeCode != ''">
		and a.EMPLOYEECODE = #{employeeCode}
	</if>
	
	 <if test="fromDate != null and fromDate != ''">
		and a.B_DATE &gt;= #{fromDate}
	</if>
	 <if test="toDate != null and toDate != ''">
		and a.B_DATE &lt;= #{toDate}
	</if>
   
 	limit #{firstResult},#{maxResult}
 </select>
  
  <select id="findById" resultMap="BaseResultMap" parameterType="com.glens.pwCloudOs.pm.everydayMgr.expInfoColle.vo.ExpInfoColleVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    select 
    <include refid="Base_Column_List" />
    from pm_expand a
   
    where rowid = #{rowid}
  </select>
  <delete id="delete" parameterType="com.glens.pwCloudOs.pm.everydayMgr.expInfoColle.vo.ExpInfoColleVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    delete from pm_expand
    where rowid = #{rowid}
  </delete>
  <insert id="insert" parameterType="com.glens.pwCloudOs.pm.everydayMgr.expInfoColle.vo.ExpInfoColleVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
   insert into pm_expand
	(COMPANY_CODE, EMPLOYEECODE, EMPLOYEENAME,PHONE, EX_PRO_NAME, EX_PRO_SCOPE, EX_PRO_TYPE, EX_PRO_T_PRICE, 
	EX_PRO_U_PRICE, OWNER_NAME, OWNER_RESPONSIBLER, OWNER_NEEDS, S_DATE, E_DATE, B_DATE, MARKETOR, 
	IS_CONTRACT, SYS_CREATE_TIME, SYS_PROCESS_FLAG, REMARKS
	)
	values
	(#{companyCode}, #{employeeCode}, #{employeeName},#{phone}, #{exproName}, #{exproScope},#{exproType}, #{exproTprice}, 
	#{exproUprice},  #{ownerName}, #{ownerResponsibler}, #{ownerNeeds}, #{sdate}, #{edate}, #{bdate}, #{marketor}, 
	#{isContract}, now(), '1', #{remarks})
  </insert>
  
  <update id="update" parameterType="com.glens.pwCloudOs.pm.everydayMgr.expInfoColle.vo.ExpInfoColleVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    update pm_expand
    <set >
      <if test="employeeCode != null" >
        EMPLOYEECODE = #{employeeCode,jdbcType=VARCHAR},
      </if>
      <if test="employeeName != null" >
        EMPLOYEENAME = #{employeeName,jdbcType=VARCHAR},
      </if>
      <if test="phone != null" >
        PHONE = #{phone,jdbcType=VARCHAR},
      </if>
      <if test="exproName != null" >
        EX_PRO_NAME = #{exproName},
      </if>
      <if test="exproScope != null" >
        EX_PRO_SCOPE = #{exproScope},
      </if>
      <if test="exproType != null" >
        EX_PRO_TYPE = #{exproType},
      </if>
      <if test="exproTprice != null" >
        EX_PRO_T_PRICE = #{exproTprice},
      </if>
      <if test="exproUprice != null" >
        EX_PRO_U_PRICE = #{exproUprice},
      </if>
      <if test="ownerName != null" >
        OWNER_NAME = #{ownerName},
      </if>
      <if test="ownerResponsibler != null" >
        OWNER_RESPONSIBLER = #{ownerResponsibler},
      </if>
      <if test="ownerNeeds != null" >
        OWNER_NEEDS = #{ownerNeeds},
      </if>
      <if test="sdate != null" >
        S_DATE = #{sdate},
      </if>
      <if test="edate != null" >
        E_DATE = #{edate},
      </if>
       <if test="bdate != null" >
        B_DATE = #{bdate},
      </if>
       <if test="marketor != null" >
        MARKETOR = #{marketor},
      </if>
       <if test="isContract != null" >
        IS_CONTRACT = #{isContract},
      </if>
       <if test="remarks != null" >
        REMARKS = #{remarks},
      </if>
      SYS_UPDATE_TIME = now()
    </set>
   where rowid = #{rowid}
  </update>
  <select id="getProManger"  resultType="java.util.HashMap">
  	select distinct PRO_MANAGER promanager,EMPLOYEECODE employeecode from pm_base
	where pro_status=2
  </select>
</mapper>