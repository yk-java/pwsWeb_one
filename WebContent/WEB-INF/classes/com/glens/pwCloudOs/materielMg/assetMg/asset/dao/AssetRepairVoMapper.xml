<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.glens.pwCloudOs.materielMg.assetMg.asset.dao.AssetRepairVoMapper" >
  <resultMap id="BaseResultMap" type="com.glens.pwCloudOs.materielMg.assetMg.asset.vo.AssetRepairVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    <id column="rowid" property="rowid" jdbcType="BIGINT" />
    <result column="ASSET_CODE" property="assetCode" jdbcType="VARCHAR" />
    <result column="ASSET_NAME" property="assetName" jdbcType="VARCHAR" />
    <result column="LOAN_EMPLOYEECODE" property="loanEmployeeCode" jdbcType="VARCHAR" />
    <result column="LOAN_EMPLOYEENAME" property="loanEmployeeName" jdbcType="VARCHAR" />
    <result column="LOAN_UNIT_CODE" property="loanUnitCode" jdbcType="VARCHAR" />
    <result column="LOAN_UNIT_NAME" property="loanUnitName" jdbcType="VARCHAR" />
    <result column="LOAN_PRO_NO" property="loanProNo" jdbcType="VARCHAR" />
    <result column="LOAN_PRO_NAME" property="loanProName" jdbcType="VARCHAR" />
    <result column="REPORT_DATE" property="reportDate" jdbcType="VARCHAR" />
    <result column="REPAIR_DATE" property="repairDate" jdbcType="VARCHAR" />
    <result column="FINISH_DATE" property="finishDate" jdbcType="VARCHAR" />
    <result column="REPAIR_REASON" property="repairReason" jdbcType="VARCHAR" />
    <result column="REPAIR_COST" property="repairCost" jdbcType="REAL" />
    <result column="REPAIR_RECEIPT" property="repairReceipt" jdbcType="VARCHAR" /> 
    <result column="REPAIR_VENDER" property="repairVender" jdbcType="VARCHAR" />   
    <result column="REPAIR_STATUS" property="repairStatus" jdbcType="INTEGER" /> 
    <result column="FLOW_STATUS" property="flowStatus" jdbcType="INTEGER" />     
    <result column="REMARKS" property="remarks" jdbcType="VARCHAR" />    
    
  </resultMap>
  
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
  
   
    g.rowid,g.ASSET_CODE,b.ASSET_NAME,g.LOAN_EMPLOYEECODE,g.LOAN_EMPLOYEENAME,g.LOAN_UNIT_CODE,g.LOAN_UNIT_NAME,g.LOAN_PRO_NO,g.LOAN_PRO_NAME,g.REPORT_DATE,g.FINISH_DATE,g.REPAIR_DATE,g.REPAIR_REASON,g.REPAIR_COST,
g.REPAIR_RECEIPT,g.REPAIR_VENDER,g.REMARKS

  </sql>
  
  <select id="queryForCount" parameterType="java.util.HashMap" resultType="int">
  	select count(*) from GM_ASSET_REPAIR
  	where SYS_PROCESS_FLAG='1' and ASSET_CODE=#{assetCode}
  	<if test="fromDate != null and fromDate !=''">
  	and REPAIR_DATE &gt;=#{fromDate}
  	</if>
  	<if test="toDate != null and toDate !=''">
  	and REPAIR_DATE &lt;=#{toDate}
  	</if>
  </select>
  
  <select id="queryForPage" parameterType="java.util.HashMap" resultMap="BaseResultMap">
  	select 
    <include refid="Base_Column_List" />
    FROM GM_ASSET_REPAIR g
	LEFT JOIN gm_asset_base b  on g.ASSET_CODE=b.ASSET_CODE
    where g.SYS_PROCESS_FLAG='1' and g.ASSET_CODE=#{assetCode}
  	<if test="fromDate != null and fromDate !=''">
  	and g.REPAIR_DATE &gt;=#{fromDate}
  	</if>
  	<if test="toDate != null and toDate !=''">
  	and g.REPAIR_DATE &lt;=#{toDate}
  	</if>
  	limit #{firstResult},#{maxResult}
  </select>
  
  <delete id="delete" parameterType="com.glens.pwCloudOs.materielMg.assetMg.asset.vo.AssetRepairVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
   
    
    delete from GM_ASSET_REPAIR where rowid = #{rowid,jdbcType=BIGINT}
  </delete>
  <insert id="insert" parameterType="com.glens.pwCloudOs.materielMg.assetMg.asset.vo.AssetRepairVo" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->

    INSERT INTO GM_ASSET_REPAIR(ASSET_CODE,LOAN_EMPLOYEECODE,LOAN_EMPLOYEENAME,LOAN_UNIT_CODE,
    LOAN_UNIT_NAME,LOAN_PRO_NO,LOAN_PRO_NAME,REPORT_DATE,FINISH_DATE,
    REPAIR_DATE,REPAIR_REASON,REPAIR_COST,REPAIR_RECEIPT,REPAIR_VENDER,REMARKS,REPAIR_STATUS,FLOW_STATUS,SYS_CREATE_TIME,SYS_PROCESS_FLAG) 
    VALUES (#{assetCode},#{loanEmployeeCode},#{loanEmployeeName},#{loanUnitCode},
    #{loanUnitName},#{loanProNo},#{loanProName},#{reportDate},#{finishDate},
    #{repairDate},#{repairReason},#{repairCost},#{repairReceipt},#{repairVender},#{remarks},2,4,NOW(),'1')
  </insert>
  
 
  
</mapper>